I"£4<p>ì°¸ê³ ìë£Œ
<a href="https://sunghyun1038.tistory.com/24">https://sunghyun1038.tistory.com/24</a>
<a href="https://developer.android.com/training/gestures/viewgroup?hl=ko">https://developer.android.com/training/gestures/viewgroup?hl=ko</a>
<a href="https://developer.android.com/guide/topics/graphics/prop-animation?hl=ko">https://developer.android.com/guide/topics/graphics/prop-animation?hl=ko</a></p>

<p float="center">
  <img src="/assets/images/gif/2020-10-2200-42.gif" width="300" />
</p>

<h2 id="fragment_main_swipexml">fragment_main_swipe.xml</h2>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/intro_cl"
    android:layout_width="match_parent"
    android:layout_height="match_parent"&gt;

    &lt;TextView
        style="@style/Text.RankStyle"
        android:id="@+id/intro_login_text"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:gravity="center"
        android:text="@string/login"
        android:textSize="20sp"
        android:visibility="gone"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toTopOf="parent" /&gt;

    &lt;com.airbnb.lottie.LottieAnimationView
        android:id="@+id/intro_swipe_up"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginStart="10dp"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintBottom_toTopOf="@+id/intro_logo"
        app:lottie_autoPlay="true"
        app:lottie_loop="true"
        app:lottie_rawRes="@raw/main_swipe_up"/&gt;

    &lt;com.airbnb.lottie.LottieAnimationView
        android:id="@+id/intro_cursor"
        android:layout_width="200dp"
        android:layout_height="200dp"
        android:layout_marginTop="30dp"
        app:layout_constraintBottom_toBottomOf="@id/intro_logo"
        app:layout_constraintLeft_toLeftOf="@id/intro_logo"
        app:layout_constraintRight_toRightOf="@id/intro_logo"
        app:layout_constraintTop_toTopOf="@id/intro_logo"
        app:lottie_autoPlay="true"
        app:lottie_loop="true"
        app:lottie_rawRes="@raw/main_cursor" /&gt;

    &lt;TextView
        android:id="@+id/intro_logo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="@string/app_name"
        android:textSize="30sp"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toTopOf="parent"
        style="@style/Text.TitleStyle"/&gt;

    &lt;com.airbnb.lottie.LottieAnimationView
        android:id="@+id/intro_swipe_down"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginEnd="10dp"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toBottomOf="@+id/intro_logo"
        app:lottie_autoPlay="true"
        app:lottie_loop="true"
        app:lottie_rawRes="@raw/main_swipe_down"/&gt;

    &lt;TextView
        style="@style/Text.RankStyle"
        android:id="@+id/intro_guest_text"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:gravity="center"
        android:text="@string/guest"
        android:textSize="20sp"
        android:visibility="gone"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintBottom_toBottomOf="parent" /&gt;
&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;
</code></pre></div></div>

<ul>
  <li>Constraintlayout =&gt; parent layout
    <ul>
      <li>intro_login_text: TextView =&gt; <code class="language-plaintext highlighter-rouge">LOGIN</code> text
        <ul>
          <li>visibility=gone  =&gt; ì²˜ìŒì—” ë Œë”ë§ë˜ì§€ ì•ŠìŒ</li>
        </ul>
      </li>
      <li>intro_swipe_up: LottieAnimation =&gt; ì¤‘ì•™ë¡œê³  í´ë¦­ ì‹œ ìœ„ë¡œ í–¥í•˜ëŠ” í™”ì‚´í‘œ ì• ë‹ˆë©”ì´ì…˜</li>
      <li>intro_cursr: LottieAnimation =&gt; ë¡œê³  ì•„ë˜ì— í´ë¦­ì„ ìœ ë„í•˜ëŠ” ì†ëª¨ì–‘ ì• ë‹ˆë©”ì´ì…˜</li>
      <li>intro_logo : Textview =&gt; ì¤‘ì•™ë¡œê³ </li>
      <li>intro_swipe_down: LottieAnimation =&gt; ì¤‘ì•™ ë¡œê³  í´ë¦­ ì‹œ ì•„ë˜ë¡œ í–¥í•˜ëŠ” í™”ì‚´í‘œ ì• ë‹ˆë©”ì´ì…˜</li>
      <li>intro_guest_text: TextView =&gt; <code class="language-plaintext highlighter-rouge">GUEST</code> text</li>
    </ul>
  </li>
</ul>

<h2 id="mainswipefragmentkt">MainSwipeFragment.kt</h2>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    override fun onCreateView(
        inflater: LayoutInflater,
        container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View? {
        
        return inflater.inflate(R.layout.fragment_main_swipe, container, false)
    }
</code></pre></div></div>
<ul>
  <li>Fragment override í•¨ìˆ˜</li>
  <li>inflaterë¥¼ í†µí•´ ìœ„ì—ì„œ ìƒì„±í•œ xml í”„ë˜ê·¸ë¨¼íŠ¸ë¥¼ ì…ë ¥í•œë‹¤.</li>
  <li>containerëŠ” activityì—ì„œ fragment ìƒì„± ì‹œ ì…ë ¥ë°›ëŠ”ë‹¤.
    <ul>
      <li>container =&gt; í”„ë˜ê·¸ë¨¼íŠ¸ê°€ í‘œì‹œ ë  ì•¡í‹°ë¹„í‹°</li>
    </ul>
  </li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    private lateinit var parentView: ConstraintLayout
    private lateinit var logoSwipeButton: TextView
    private lateinit var loginTextView: TextView
    private lateinit var guestTextView: TextView
    
    private lateinit var cursorAnimation: LottieAnimationView
    private lateinit var swipeUpAnimation: LottieAnimationView
    private lateinit var swipeDownAnimation: LottieAnimationView
		
		...
		
		    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)
        
        logoSwipeButton = view.findViewById(R.id.intro_logo)
        cursorAnimation = view.findViewById(R.id.intro_cursor)
        
        swipeUpAnimation = view.findViewById(R.id.intro_swipe_up)
        swipeDownAnimation = view.findViewById(R.id.intro_swipe_down)
        swipeDownAnimation.visibility = View.GONE
        swipeUpAnimation.visibility = View.GONE
        
        parentView = view.findViewById(R.id.intro_cl)
        
        loginTextView = view.findViewById(R.id.intro_login_text)
        guestTextView = view.findViewById(R.id.intro_guest_text)
        
        var statusBarHeight: Int = 0
        var resId = resources.getIdentifier("status_bar_height", "dimen", "android")
        if (resId &gt; 0) {
            statusBarHeight = resources.getDimensionPixelSize(resId)
        }
        
        setOnTouchListener(statusBarHeight)
    }
</code></pre></div></div>
<ul>
  <li>lateinit varë¡œ ìœ„ì—ì„œ ìƒì„±í•œ ê°ê°ì˜ ë·°ì˜ íƒ€ì…ì„ ì§€ì •í•œë‹¤.
    <ul>
      <li>onView() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ viewë¥¼ ë„˜ê²¨ë°›ì•„ findViewByIdë¡œ xmlë‚´ë¶€ì˜ ë·°ë“¤ê³¼ ì—°ê²°í•œë‹¤.</li>
      <li>swipedown, swipeup ì• ë‹ˆë©”ì´ì…˜ì€ í´ë¦­ ì‹œ ë³´ì—¬ì§€ê¸° ë•Œë¬¸ì— visibility = gone ìœ¼ë¡œ ì„¤ì •í•œë‹¤.</li>
      <li>ìƒíƒœë°” í¬ê¸°ë¥¼ êµ¬í•˜ëŠ” ì´ìœ ëŠ” ì¤‘ì•™ ë¡œê³ ë¥¼ ìŠ¤ì™€ì´í”„ë¡œ ì´ë™í•˜ê³  ë‹¤ì‹œ ì›ìœ„ì¹˜ë¡œ ëŒì•„ê°ˆ ë•Œ í•„ìš”í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
        <ul>
          <li>ì¤‘ì•™ì •ë ¬ì—ì„œ ì•½ê°„ ë¹—ë‚˜ê°</li>
        </ul>
      </li>
      <li>setOnTouchListener() ë‚´ë¶€ì— ì¤‘ì•™ë¡œê³ ì¸ logoSwipeButtonì— ë¦¬ìŠ¤ë„ˆë¥¼ ì—°ê²°í•˜ì—¬ êµ¬í˜„</li>
    </ul>
  </li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    @SuppressLint("ClickableViewAccessibility", "Recycle", "ResourceAsColor")
    private fun setOnTouchListener(status: Int) {
        logoSwipeButton.setOnTouchListener { button, event -&gt;
            //var parentWidth = parentView.width
            var parentHeight = parentView.height
            
						when (event!!.action) {
                MotionEvent.ACTION_DOWN -&gt; {
                    cursorAnimation.visibility = View.GONE
                    guestTextView.visibility = View.VISIBLE
                    loginTextView.visibility = View.VISIBLE
                    swipeDownAnimation.visibility = View.VISIBLE
                    swipeUpAnimation.visibility = View.VISIBLE
                    swipeDownAnimation.playAnimation()
                    swipeUpAnimation.playAnimation()
                }
    
                MotionEvent.ACTION_UP -&gt; {
                    button.y = ((parentHeight * 0.5f) - status)
                    button.visibility = View.VISIBLE
                    cursorAnimation.visibility = View.VISIBLE
                    swipeDownAnimation.visibility = View.GONE
                    swipeUpAnimation.visibility = View.GONE
                    guestTextView.visibility = View.GONE
                    loginTextView.visibility = View.GONE
                    guestTextView.setTextSize(TypedValue.COMPLEX_UNIT_SP, 20f)
                    loginTextView.setTextSize(TypedValue.COMPLEX_UNIT_SP, 20f)
                }
    
                MotionEvent.ACTION_MOVE -&gt; {
                    button.y = button.y + (event.y - (button.height * 0.5f))
                    button.visibility = View.VISIBLE
                    guestTextView.setTextSize(TypedValue.COMPLEX_UNIT_SP, 20f)
                    loginTextView.setTextSize(TypedValue.COMPLEX_UNIT_SP, 20f)
                    when {
                        button.y &lt; (parentHeight * 0.1f) - status -&gt; {
                            button.visibility = View.GONE
                            loginTextView.setTextSize(TypedValue.COMPLEX_UNIT_SP, 30f)
                        }
            
                        button.y &gt; (parentHeight * 0.9f) - status -&gt; {
                            button.visibility = View.GONE
                            guestTextView.setTextSize(TypedValue.COMPLEX_UNIT_SP, 30f)
                        }
            
                        button.y &lt; (parentHeight * 0.45f) - status ||
                                button.y &gt; (parentHeight * 0.55f) - status  -&gt; {
                            swipeUpAnimation.visibility = View.GONE
                            swipeDownAnimation.visibility = View.GONE
                        }
                    }
                }
            }
            true
        }
    }
</code></pre></div></div>
<ul>
  <li>MotionEvent.ACTION_DOWN
    <ul>
      <li>í™”ë©´ì— ì†ê°€ë½ì´ ë‹¿ëŠ” ìˆœê°„ì„ ì˜ë¯¸í•¨</li>
      <li>ëˆŒë ¤ì§€ëŠ” ìˆœê°„ ë³´ì—¬ì ¸ì•¼ í•  ìƒí™©ì´ êµ¬í˜„ë˜ì–´ ìˆìŒ</li>
    </ul>
  </li>
  <li>MotionEvent.ACTION_UP
    <ul>
      <li>í™”ë©´ì—ì„œ ì†ê°€ë½ì´ ë—´ì–´ì§€ëŠ” ìˆœê°€ì„ ì˜ë¯¸í•¨</li>
      <li>ë³€ê²½ëœ ì‚¬í•­ë“¤ì´ ì›ë˜ ìœ„ì¹˜ë¡œ reset ë˜ë„ë¡ êµ¬í˜„ë˜ì–´ ìˆìŒ</li>
    </ul>
  </li>
  <li>MotionEvent.ACTION_MOVE
    <ul>
      <li>í„°ì¹˜ ë˜ì–´ì§„ ìƒíƒœì—ì„œ ì›€ì§ì„ì„ ê°ì§€í•˜ëŠ” ëª¨ë“  ìˆœê°„ì„ ì˜ë¯¸í•¨</li>
      <li>var parentHeight = parentView.height
        <ul>
          <li>í˜„ì¬ ìµœìƒë‹¨ ë ˆì´ì•„ì›ƒì˜ ì‹¤ì œ ë†’ì´ë¥¼ êµ¬í˜„í•˜ê³  ì¢Œí‘œê°’ì„ êµ¬í•¨</li>
        </ul>
      </li>
      <li>button.y = button.y + (event.y - (button.height * 0.5f))
        <ul>
          <li>yì¶•ì—ì„œ í„°ì¹˜ëœ ì†ê°€ë½ì˜ ì‹¤ì œ ì¢Œí‘œë¥¼ êµ¬í•¨</li>
          <li>yì¶•ë§Œ êµ¬í˜„ë˜ì–´ìˆìŒ</li>
        </ul>
      </li>
      <li>button.y &lt; (parentHeight * 0.1f) - status
        <ul>
          <li>í„°ì¹˜ëœ ì†ê°€ë½ì´ ìµœìƒë‹¨ <code class="language-plaintext highlighter-rouge">LOGIN</code> text ë²”ìœ„ì— ë‹¿ëŠ” ìˆœê°„ì„ ì˜ë¯¸í•¨</li>
        </ul>
      </li>
      <li>button.y &gt; (parentHeight * 0.9f) - status
        <ul>
          <li>í„°ì¹˜ëœ ì†ê°€ë½ì´ ìµœí•˜ë‹¨ <code class="language-plaintext highlighter-rouge">GUEST</code> text ë²”ìœ„ì— ë‹¿ëŠ” ìˆœê°„ì„ ì˜ë¯¸í•¨</li>
        </ul>
      </li>
      <li>
        <table>
          <tbody>
            <tr>
              <td>button.y &lt; (parentHeight * 0.45f) - status</td>
              <td>Â </td>
              <td>button.y &gt; (parentHeight * 0.55f) - status</td>
            </tr>
          </tbody>
        </table>
      </li>
      <li>ì¤‘ì•™ ë¡œê³ ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìœ„ ì•„ë˜ë¡œ ì¡°ê¸ˆì”© ì›€ì§ì˜€ì„ ë•Œì˜ ë²”ìœ„ë¥¼ ì˜ë¯¸í•¨</li>
    </ul>
  </li>
</ul>

<h2 id="mainactivitykt">MainActivity.kt</h2>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        
        supportFragmentManager.beginTransaction()
            .replace(R.id.contentFrame, MainSwipeFragment())
            .commit()
    }
</code></pre></div></div>
<ul>
  <li>supportFragmentManager =&gt; í”„ë˜ê·¸ë¨¼íŠ¸ ìƒì„±</li>
</ul>
:ET