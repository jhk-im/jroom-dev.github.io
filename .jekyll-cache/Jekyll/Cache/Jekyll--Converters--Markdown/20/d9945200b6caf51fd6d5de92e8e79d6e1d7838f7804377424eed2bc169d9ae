I"ûb<h2 id="architecture-component">Architecture Component</h2>
<p float="center">
  <img src="/assets/images/gif/2020-10-2318-56.gif" width="300" />
</p>

<p>Architecture Component ì˜ˆì œë¥¼ ê³µë¶€í•˜ë©´ì„œ ì£¼ìš” ê¸°ëŠ¥ìœ¼ë¡œ ìë¦¬ì¡ê³  ìˆëŠ” <code class="language-plaintext highlighter-rouge">Room</code>, <code class="language-plaintext highlighter-rouge">LiveData</code>, <code class="language-plaintext highlighter-rouge">Repository</code> , <code class="language-plaintext highlighter-rouge">ViewModel</code>, ì— ëŒ€í•˜ì—¬ ì •ë¦¬í•œ ê¸€ì´ë‹¤.</p>

<p float="center">
<img src="/assets/images/png/architectureComponent.png" width="100%" />
</p>
<p>ì´ë¯¸ì§€ ì¶œì²˜ ë° ì°¸ê³ ìë£Œ <br />
<a href="https://codelabs.developers.google.com/codelabs/android-room-with-a-view-kotlin?hl=ko#1">https://codelabs.developers.google.com/codelabs/android-room-with-a-view-kotlin?hl=ko#1</a></p>

<p>ê³µì‹ë¬¸ì„œ
<a href="import androidx.lifecycle.viewModelScope">Room</a>
<a href="https://developer.android.com/topic/libraries/architecture/livedata?hl=ko">LiveData</a>
<a href="https://developer.android.com/topic/libraries/architecture/viewmodel?hl=ko">ViewModel</a></p>

<h2 id="room"><code class="language-plaintext highlighter-rouge">Room</code>?</h2>
<p><code class="language-plaintext highlighter-rouge">Room</code>ì€ <code class="language-plaintext highlighter-rouge">SQLite</code> ì¶”ìƒí™” ë ˆì´ì–´ë¥¼ ì œê³µí•˜ì—¬ <code class="language-plaintext highlighter-rouge">SQLite</code>ë¥¼ ì™„ë²½íˆ í™œìš©í•˜ë©´ì„œ ë” ê²¬ê³ í•œ ë°ì´í„° ë² ì´ìŠ¤ ì•¡ì„¸ìŠ¤ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤.</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">SQLite</code> ë°ì´í„°ë² ì´ìŠ¤ ìœ„ì— ìˆëŠ” ë°ì´í„°ë² ì´ìŠ¤ ê³„ì¸µì´ë‹¤.</li>
  <li>SQLiteOpenHelperë¡œ ì²˜ë¦¬í•˜ë˜ ì‘ì—…ì„ ì²˜ë¦¬í•œë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">DAO</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì— ì¿¼ë¦¬ë¥¼ ë°œê¸‰í•œë‹¤.</li>
  <li>ì„±ëŠ¥ì €í•˜ë¥¼ í”¼í•˜ê¸° ìœ„í•´ main thread ì—ì„œ Queryë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">Room</code>ì—ì„œ LiveDataë¥¼ ë°˜í™˜í•˜ë©´ ë°±ê·¸ë¼ìš´ë“œ ìŠ¤ë ˆë“œì—ì„œ Query ë¹„ë™ê¸°ë¡œ ìë™ì‹¤í–‰ëœë‹¤.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//bulid.gradle

implementation "androidx.room:room-runtime:$rootProject.roomVersion"
kapt "androidx.room:room-compiler:$rootProject.roomVersion"
implementation "androidx.room:room-ktx:$rootProject.roomVersion"
androidTestImplementation "androidx.room:room-testing:$rootProject.roomVersion"
</code></pre></div></div>
<h4 id="entity"><code class="language-plaintext highlighter-rouge">Entity</code></h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// Word.kt

@Entity(tableName = "word_table")
data class Word(@PrimaryKey @ColumnInfo(name = "word") val word: String)
</code></pre></div></div>
<ul>
  <li>@Entity(tableName =â€â€)
    <ul>
      <li>SQLite table</li>
      <li>table nameì„ ì„¤ì •í•œë‹¤.</li>
    </ul>
  </li>
  <li>@PrimaryKey
    <ul>
      <li>ëª¨ë“  entity ëŠ” primary keyê°€ ìˆì–´ì•¼í•œë‹¤.</li>
    </ul>
  </li>
  <li>@ColumnInfo -&gt; column ì´ë¦„ì„ ì„¤ì •í•˜ê³  ìœ í˜•ì„ ì§€ì •í•œë‹¤.</li>
  <li>ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ëœ ëª¨ë“  ì†ì„±ì€ public ì´ë©° kotlinì˜ ê¸°ë³¸ ì„¤ì •ì´ë‹¤.</li>
</ul>

<h4 id="dao"><code class="language-plaintext highlighter-rouge">DAO</code></h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//WordDao.kt

@Dao
interface WordDao {

    @Query("SELECT * from word_table ORDER BY word ASC")
    fun getAlphabetizedWords(): LiveData&lt;List&lt;Word&gt;&gt;

    @Insert(onConflict = OnConflictStrategy.IGNORE)
    suspend fun insert(word: Word)

    @Query("DELETE FROM word_table")
    suspend fun deleteAll()
}
</code></pre></div></div>
<ul>
  <li><code class="language-plaintext highlighter-rouge">Dao</code>ëŠ” interfaceí˜¹ì€ abstract í´ë˜ìŠ¤ë¡œ ì„¤ì •í•´ì•¼ í•œë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">@Dao</code>
    <ul>
      <li>Roomì„ ìœ„í•œ DAO í´ë˜ìŠ¤ë¡œ ì‹ë³„í•œë‹¤.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">@Insert</code>
    <ul>
      <li>SQL ë¬¸ë²•ì´ í•„ìš”ì—†ëŠ” íŠ¹ë³„í•œ DAO ë©”ì†Œë“œ anottationì´ë‹¤.</li>
      <li>í…Œì´ë¸”ì— ë°ì´í„°ë¥¼ ì¶”ê°€í•˜ëŠ” ìš©ë„</li>
      <li>ë™ì¼í•˜ê²Œ <code class="language-plaintext highlighter-rouge">@Update</code>, <code class="language-plaintext highlighter-rouge">@Delete</code>ë„ ì œê³µëœë‹¤.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">OnConflictStrategy.IGNORE</code>
    <ul>
      <li>ì…ë ¥ëœ ê°’ì´ í…Œì´ë¸”ì— ìˆëŠ” ê°’ê³¼ ë™ì¼í•˜ë©´ ì‘ì—…ì„ ë¬´ì‹œí•œë‹¤.</li>
    </ul>
  </li>
  <li>deleteAll()
    <ul>
      <li><code class="language-plaintext highlighter-rouge">@Delete</code>ëŠ” ì—¬ëŸ¬ê°œì˜ entitiy ì‚­ì œí•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— <code class="language-plaintext highlighter-rouge">@Query</code>ë¡œ ì§ì ‘ êµ¬í˜„í•´ì•¼ í•œë‹¤.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">@Query</code>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">@Query</code>ëŠ” string parameterë¡œ ë˜ì–´ìˆëŠ” SQLì„ ì…ë ¥ë°›ê³  ì‹¤í–‰í•˜ëŠ” annotationì´ë‹¤.</li>
      <li>êµ¬í˜„ì„ ìœ„í•´ SQLite ë¬¸ë²•ì„ ì´í•´í•˜ê³  ìˆì–´ì•¼ í•œë‹¤.</li>
    </ul>
  </li>
</ul>

<h4 id="roomdatabase"><code class="language-plaintext highlighter-rouge">RoomDatabase</code></h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//WordRoomDatabase.kt


@Database(entities = [Word::class], version = 1, exportSchema = false)
abstract class WordRoomDatabase : RoomDatabase() {

    // The database exposes DAOs through an abstract 'getter' method for each @Dao.
    abstract fun wordDao(): WordDao
		
		. . .
}

</code></pre></div></div>
<ul>
  <li><code class="language-plaintext highlighter-rouge">Room</code>í´ë˜ìŠ¤ëŠ” abstractë¡œ ì„ ì–¸í•´ì•¼ í•˜ë©° <code class="language-plaintext highlighter-rouge">RoomDatabase</code>ê°ì²´ë¥¼ ìƒì†ë°›ì•„ì•¼ í•œë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">@Database</code>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">Entity</code>ì™€ versionì„ ì…ë ¥ë°›ì•„ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì…‹íŒ…í•œë‹¤.</li>
      <li>ê°ê°ì˜ <code class="language-plaintext highlighter-rouge">Entity</code>ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì— ì‘ì„± ë  í…Œì´ë¸”ì— í•´ë‹¹í•œë‹¤.</li>
      <li><code class="language-plaintext highlighter-rouge">exportSchema</code>
        <ul>
          <li>ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ì€ ì½”ë“œì˜ ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ë¯€ë¡œ ë¹Œë“œ ê²½ê³ ë¥¼ í”¼í•˜ê¸° ìœ„í•´ ì—¬ê¸°ì„œ exportSchemaë¥¼ falseë¡œ ì„¤ì •í•´ì•¼í•œë‹¤.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>database schemaê°€ ë³€ê²½ë  ê²½ìš° version numberë¥¼ ì—…ë°ì´íŠ¸í•˜ê³  migrationì„ ê´€ë¦¬í•´ì•¼ í•œë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">wordDao()</code>
    <ul>
      <li>ë°ì´í„°ë² ì´ìŠ¤ëŠ” ê°ê°ì˜ <code class="language-plaintext highlighter-rouge">DAO</code>ì— ëŒ€í•´ abstract getter ë°©ë²•ìœ¼ë¡œ ì œê³µí•œë‹¤.</li>
    </ul>
  </li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>. . .
abstract fun wordDao(): WordDao

private class WordDatabaseCallback(
    private val scope: CoroutineScope
) : RoomDatabase.Callback() {

    override fun onOpen(db: SupportSQLiteDatabase) {
        super.onOpen(db)
        WordRoomDatabase.INSTANCE?.let { database -&gt;
            scope.launch {
                var wordDao = database.wordDao()

                // Delete all content here.
                wordDao.deleteAll()

                // Add sample words.
                var word = Word("Hello")
                wordDao.insert(word)
                word = Word("World!")
                wordDao.insert(word)

                // TODO: Add your own words!
                word = Word("TODO!")
                wordDao.insert(word)
            }
        }
    }
}
. . .
</code></pre></div></div>
<ul>
  <li>WordDatabase ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë  ë•Œ ì‹¤í–‰ë  callback í•¨ìˆ˜ì´ë‹¤.</li>
  <li>scope: CoroutineScope
    <ul>
      <li>Roomì˜ QueryëŠ” main Threadì—ì„œ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.
        <ul>
          <li>ë‹¤ë¥¸ Threadë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ CoroutineScopeë¥¼ ì…ë ¥ë°›ì•„ ì‚¬ìš©í•œë‹¤.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>wordDaoì˜ ë™ì‘
    <ul>
      <li>deleteAll() -&gt; entityë¥¼ ëª¨ë‘ ì§€ìš´ë‹¤.</li>
      <li>insert() -&gt; â€œHelloâ€, â€œWorld!â€, â€œTodoâ€ 3ê°€ì§€ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  insert í•œë‹¤.</li>
    </ul>
  </li>
  <li>ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ entityê°€ ì´ˆê¸°í™” ë˜ì–´ì•¼ í•˜ê±°ë‚˜ ê¼­ ìˆì–´ì•¼í•˜ëŠ” ë°ì´í„°ê°€ ìˆì„ ê²½ìš° ìœ„ ë°©ë²•ì„ í†µí•´ êµ¬í˜„í•œë‹¤.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>. . .
companion object {
    @Volatile
    private var INSTANCE: WordRoomDatabase? = null

    fun getDatabase(
        context: Context,
        scope: CoroutineScope
    ): WordRoomDatabase {
        // if the INSTANCE is not null, then return it,
        // if it is, then create the database
        return INSTANCE ?: synchronized(this) {
            val instance = Room.databaseBuilder(
                context.applicationContext,
                WordRoomDatabase::class.java,
                "word_database"
            )
                .addCallback(WordRoomDatabase.WordDatabaseCallback(scope))
                .build()
            INSTANCE = instance
            // return instance
            instance
        }
    }
}
. . .
</code></pre></div></div>
<ul>
  <li><code class="language-plaintext highlighter-rouge">getDatabase()</code>
    <ul>
      <li>í•´ë‹¹ ë©”ì†Œë“œë¥¼ í†µí•´ Database ê°ì²´ë¥¼ ì‹±ê¸€í„´ìœ¼ë¡œ ë°˜í™˜í•œë‹¤.</li>
      <li>contextì™€ callback í•¨ìˆ˜ ì‹¤í–‰ì„ ìœ„í•´ CoroutinScopeë¥¼ ì…ë ¥ë°›ëŠ”ë‹¤.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">Room.databaseBuilder()</code>
    <ul>
      <li>ì‘ìš© í”„ë¡œê·¸ë¨ contextì—ì„œ RoomDatabase ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.</li>
      <li>context, Roomdatabase, database nameì„ ì…ë ¥ë°›ëŠ”ë‹¤.</li>
      <li><code class="language-plaintext highlighter-rouge">addCallback()</code>
        <ul>
          <li>bulid ì „ ì½œë°±í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ì—¬ ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•œë‹¤.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">bulid()</code>
        <ul>
          <li>ë§ˆì§€ë§‰ìœ¼ë¡œ ë¹Œë“œí•˜ê³  instanceë¥¼ ë°˜í™˜í•œë‹¤.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="repository-"><code class="language-plaintext highlighter-rouge">Repository</code> ?</h2>
<ul>
  <li><code class="language-plaintext highlighter-rouge">Repository</code>ëŠ” ì—¬ëŸ¬ ë°ì´í„° ì†ŒìŠ¤ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ë¥¼ ì¶”ìƒí™”í•œë‹¤.</li>
  <li>ì•„í‚¤í…ì²˜ êµ¬ì„±ìš”ì†Œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì†í•˜ì§€ ì•Šì§€ë§Œ ì½”ë“œ ë¶„ë¦¬ ë° ì•„í‚¤í…ì²˜ë¥¼ ìœ„í•œ ê¶Œì¥ ëª¨ë²” ì‚¬ë¡€ë‹¤.</li>
  <li>ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë‚˜ë¨¸ì§€ ë¶€ë¶„ì— ëŒ€í•œ ë°ì´í„° ì•¡ì„¸ìŠ¤ë¥¼ ìœ„í•œ APIë¥¼ ì œê³µí•œë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">Repository</code>ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ 
    <ul>
      <li><code class="language-plaintext highlighter-rouge">Qeury</code>ë¥¼ ê´€ë¦¬í•˜ê³  ì—¬ëŸ¬ ë°±ì—”ë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•œë‹¤.</li>
      <li>Networkì™€ Local ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ì´ì—ì„œ ìºì‹œëœ ê²°ê³¼ë¥¼ ì–´ë–»ê²Œ ì‚¬ìš©í• ì§€ë¥¼ ê²°ì •í•˜ê¸°ìœ„í•œ ë¡œì§ì„ êµ¬í˜„í•œë‹¤.</li>
    </ul>
  </li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// WordRepository.kt

class WordRepository(private val wordDao:WordDao) {

    val allWords: LiveData&lt;List&lt;Word&gt;&gt; = wordDao.getAlphabetizedWords()

    suspend fun insert(word: Word) {
        wordDao.insert(word)
    }
}

</code></pre></div></div>
<ul>
  <li><code class="language-plaintext highlighter-rouge">DAO</code>ë¥¼ privateìœ¼ë¡œ ìƒì„±í•¨</li>
  <li><code class="language-plaintext highlighter-rouge">DAO</code>ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ë§Œ í•„ìš”í•˜ë¯€ë¡œ ì „ì²´ ë°ì´í„°ë² ì´ìŠ¤ ëŒ€ì‹  DAOë¥¼ ì „ë‹¬í•œë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">Room</code>ì€ ë³„ë„ì˜ ì“°ë ˆë“œì—ì„œ ëª¨ë“  ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•œë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">Room</code>+ <code class="language-plaintext highlighter-rouge">DAO</code> ë¡œ ê²€ìƒ‰ëœ ê°ì²´ê°€ LiveData&lt;&gt;ë¡œ ì…ë ¥ëœë‹¤.
    <ul>
      <li>ê´€ì°°ëœ LiveDataëŠ” ë³€ê²½ ì‹œ <code class="language-plaintext highlighter-rouge">Observer</code>ì— í†µì§€í•œë‹¤.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">suspend fun insert()</code>
    <ul>
      <li>suspend ë¥¼ ë¶™ì„ìœ¼ë¡œì„œ ì½”ë£¨í‹´ìœ¼ë¡œ ì–¸ì œë“  ì§€ì—°ë˜ì—ˆë‹¤ê°€ ì¬ê°œ ë  ìˆ˜ ìˆëŠ” ë©”ì†Œë“œê°€ ì •ì˜ëœë‹¤.</li>
    </ul>
  </li>
</ul>

<h2 id="livedata"><code class="language-plaintext highlighter-rouge">LiveData</code>?</h2>
<p>ë°ì´í„°ê°€ ë³€ê²½ë  ë•Œ ë°˜ì‘í•˜ëŠ” <code class="language-plaintext highlighter-rouge">View</code>ê°€ ìˆë‹¤ê³  ê°€ì •í–ˆì„ ë•Œ ë°ì´í„°ê°€ ì–´ë–»ê²Œ ì €ì¥ë˜ëŠëƒì— ë”°ë¼ ì´ê²ƒì´ ê¹Œë‹¤ë¡œìš¸ ìˆ˜ ìˆë‹¤. ì•±ì˜ ì—¬ëŸ¬ê°€ì§€ <code class="language-plaintext highlighter-rouge">View</code>ì—ì„œ ë°ì´í„° ë³€ê²½ì„ ê´€ì°°í•˜ë‹¤ ë³´ë©´ ì½”ë“œì¤„ì´ ê¸¸ì–´ì§€ê³  ì°¾ê¸° í˜ë“¤ì–´ì§€ë©´ì„œ Testì™€ ë””ë²„ê¹…ì„ ì–´ë µê²Œ ë§Œë“ ë‹¤. <code class="language-plaintext highlighter-rouge">LiveData</code>ëŠ” ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•œë‹¤.</p>

<ul>
  <li>ì‹ë³„ ê°€ëŠ¥í•œ ë°ì´í„° í™€ë” í´ë˜ìŠ¤</li>
  <li>ì¼ë°˜ í´ë˜ìŠ¤ì™€ ë‹¬ë¦¬ ìˆ˜ëª…ì£¼ê¸°ë¥¼ ì¸ì‹í•¨</li>
  <li>activity, fragment, serviceë“±ì˜ ì•± êµ¬ì„±ìš”ì†Œ ìˆ˜ëª…ì£¼ê¸°ë¥¼ ê³ ë ¤í•¨</li>
  <li>ìˆ˜ëª…ì£¼ê¸° ì¸ì‹ì„ í†µí•´ í™œì„±ìƒíƒœì— ìˆëŠ” ì•± êµ¬ì„±ìš”ì†Œì˜ ê´€ì°°ìë§Œ ì—…ë°ì´íŠ¸ í•¨</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ì°¸ê³ :
LiveDataë¥¼ Roomê³¼ ë…ë¦½ì ìœ¼ë¡œ ì‚¬ìš©í•  ê²½ìš° ë°ì´í„° ì—…ë°ì´íŠ¸ë¥¼ ê´€ë¦¬í•´ì•¼í•œë‹¤. 
LiveDataì—ëŠ” ì €ì¥ëœ ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ë°ì— ëŒ€í•œ ê³µì‹ì ì€ ë°©ë²•ì´ ì—†ë‹¤. 

LiveData ì €ì¥ëœ ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸ í•˜ë ¤ë©´ MutableLiveDataë¥¼ ì‚¬ìš©í•´ì•¼í•œë‹¤. 
method -&gt; setValue(T), postValue(T)
ì¼ë°˜ì ìœ¼ë¡œ MutableLiveDataëŠ” ViewModel ë‚´ì—ì„œ ì‚¬ìš©ëœë‹¤.
ViewModelì€ immutable LiveData ê°ì²´ë§Œ Observersì—ê²Œ ë…¸ì¶œì‹œí‚¨ë‹¤. 
</code></pre></div></div>
<p>ë‹¤ìŒì€ ì•ˆë“œë¡œì´ë“œ ê³µì‹ë¬¸ì„œì— ë‚˜ì™€ìˆëŠ” LiveDataì˜ ì¥ì ì´ë‹¤.</p>
<h5 id="livedataì˜-ì¥ì "><code class="language-plaintext highlighter-rouge">LiveData</code>ì˜ ì¥ì </h5>
<ul>
  <li>UIì™€ ë°ì´í„° ìƒíƒœì˜ ì¼ì¹˜ ë³´ì¥
    <ul>
      <li><code class="language-plaintext highlighter-rouge">LiveData</code>ëŠ” ìˆ˜ëª…ì£¼ê¸° ìƒíƒœê°€ ë³€ê²½ë  ë•Œ <code class="language-plaintext highlighter-rouge">Observer</code> ê°ì²´ì— ì•Œë¦¼</li>
      <li>ì½”ë“œë¥¼ í†µí•©í•˜ì—¬ <code class="language-plaintext highlighter-rouge">Observer</code>ê°ì²´ì— UIë¥¼ ì—…ë°ì´íŠ¸</li>
      <li>ë°ì´í„°ê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ê´€ì°°ìê°€ UIë¥¼ ì—…ë°ì´íŠ¸ í•¨</li>
    </ul>
  </li>
  <li>ë©”ëª¨ë¦¬ëˆ„ì¶œ ì—†ìŒ
    <ul>
      <li><code class="language-plaintext highlighter-rouge">Lifecylce</code> ê°ì²´ì™€ ê´€ì°°ìê°€ ê²°í•©ë˜ì–´ ìˆê³  ìˆ˜ëª…ì£¼ê¸°ê°€ ëë‚˜ë©´ ìë™ ì‚­ì œë¨</li>
    </ul>
  </li>
  <li>ì¤‘ì§€ëœ activityë¡œ ì¸í•œ ë¹„ì •ìƒ ì¢…ë£Œê°€ ì—†ìŒ
    <ul>
      <li>ê´€ì°°ìì˜ ìˆ˜ëª…ì£¼ê¸°ê°€ ë¹„í™œì„± ìƒíƒœì´ë©´ ê´€ì°°ìëŠ” <code class="language-plaintext highlighter-rouge">LiveData</code> ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹ í•˜ì§€ ì•ŠìŒ</li>
    </ul>
  </li>
  <li>ìˆ˜ëª…ì£¼ê¸°ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì²˜ë¦¬í•˜ì§€ ì•ŠìŒ
    <ul>
      <li>UI êµ¬ì„±ìš”ì†ŒëŠ” ê´€ë ¨ ë°ì´í„°ë¥¼ ê´€ì°°í•˜ê¸°ë§Œ í•  ë¿ ê´€ì°°ì„ ì¤‘ì§€í•˜ê±°ë‚˜ ë‹¤ì‹œ ì‹œì‘í•˜ì§€ ì•ŠìŒ</li>
      <li><code class="language-plaintext highlighter-rouge">LiveData</code>ëŠ” ê´€ì°°í•˜ëŠ” ë™ì•ˆ ê´€ë ¨ ìˆ˜ëª…ì£¼ê¸° ìƒíƒœì˜ ë³€ê²½ì„ ì¸ì‹í•˜ì—¬ ìë™ìœ¼ë¡œ ê´€ë¦¬</li>
    </ul>
  </li>
  <li>ìµœì‹  ë°ì´í„° ìœ ì§€
    <ul>
      <li>ìˆ˜ëª… ì£¼ê¸°ê°€ ë¹„í™œì„±í™” ë˜ê³  ë‹¤ì‹œ í™œì„±í™” ë  ë•Œ ìµœì‹  ë°ì´í„°ë¥¼ ìˆ˜ì‹ </li>
      <li>ex) ë°±ê·¸ë¼ìš´ë“œì— ìˆë˜ activityê°€ í¬ê·¸ë¼ìš´ë“œë¡œ ëŒì•„ì˜¨ ì§í›„ ìµœì‹  ë°ì´í„° ìˆ˜ì‹ </li>
    </ul>
  </li>
  <li>ì ì ˆí•œ êµ¬ì„± ë³€ê²½
    <ul>
      <li>êµ¬ì„± ë³€ê²½(ex-&gt;ê¸°ê¸°íšŒì „)ìœ¼ë¡œ ì¸í•´ activity, fragment ë“±ì´ ë‹¤ì‹œ ìƒì„±ë˜ë©´ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìµœì‹ ì •ë³´ ë¥¼ ì¦‰ì‹œìˆ˜ì‹ </li>
    </ul>
  </li>
  <li>ë¦¬ì†ŒìŠ¤ ê³µìœ 
    <ul>
      <li>ë§µì—ì„œ ì‹œìŠ¤í…œ ì„œë¹„ìŠ¤ë¥¼ ê³µìœ í•  ìˆ˜ ìˆë„ë¡ ì‹±ê¸€í†¤ íŒ¨í„´ì„ ì‚¬ìš©í•˜ëŠ” <code class="language-plaintext highlighter-rouge">LiveData</code> ê°ì²´ë¥¼ í™•ì¥í•˜ì—¬ ì‹œìŠ¤í…œ ì„œë¹„ìŠ¤ë¥¼ ë˜í•‘</li>
      <li><code class="language-plaintext highlighter-rouge">LiveData</code> ê°ì²´ê°€ ì‹œìŠ¤í…œ ì„œë¹„ìŠ¤ì— í•œ ë²ˆ ì—°ê²°ë˜ë©´ ë¦¬ì†ŒìŠ¤ê°€ í•„ìš”í•œ ëª¨ë“  ê´€ì°°ìê°€ <code class="language-plaintext highlighter-rouge">LiveData</code> ê°ì²´ë¥¼ ë³¼ ìˆ˜ ìˆìŒ</li>
    </ul>
  </li>
</ul>

<h2 id="viewmodel"><code class="language-plaintext highlighter-rouge">ViewModel</code>?</h2>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>override fun onBindViewHolder(holder: WordViewHolder, position: Int) {
        val current = words[position]
        holder.wordItemView.text = current.word
    }

    internal fun setWords(words: List&lt;Word&gt;) {
        this.words = words
        notifyDataSetChanged()
    }

    override fun getItemCount() = words.size
</code></pre></div></div>
<ul>
  <li><code class="language-plaintext highlighter-rouge">ViewModel</code>í´ë˜ìŠ¤ëŠ” ìˆ˜ëª…ì£¼ê¸°ë¥¼ ê³ ë ¤í•˜ì—¬ UI ê´€ë ¨ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">ViewModel</code> í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ í™”ë©´ íšŒì „ê³¼ ê°™ì´ êµ¬ì„±ì„ ë³€ê²½í•  ë•Œë„ ë°ì´í„°ë¥¼ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">ViewModel</code>ì´ ì—†ëŠ”ê²½ìš°
    <ul>
      <li>Android í”„ë ˆì„ì›Œí¬ëŠ” UI Controller(activity,fragment..) ì˜ ìˆ˜ëª…ì£¼ê¸°ë¥¼ ê´€ë¦¬í•œë‹¤. í”„ë ˆì„ì›Œí¬ëŠ” íŠ¹ì • ì‚¬ìš©ì ì‘ì—…ì´ë‚˜ ì™„ì „íˆ í†µì œí•  ìˆ˜ ì—†ëŠ” ê¸°ê¸° ì´ë²¤íŠ¸ì— ëŒ€í•œ ì‘ë‹µìœ¼ë¡œ UI ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì œê±°í•˜ê±°ë‚˜ ë‹¤ì‹œ ë§Œë“¤ë„ë¡ ê²°ì •í•  ìˆ˜ ìˆë‹¤. ì´ëŸ¬í•œ ê²½ìš° ì»¨íŠ¸ë¡¤ëŸ¬ì— ì €ì¥ëœ ì¼ì‹œì ì€ ëª¨ë“  UI ê´€ë ¨ë°ì´í„°ê°€ ì†ì‹¤ëœë‹¤.</li>
      <li>ì˜ˆë¥¼ë“¤ì–´ activityì˜ view êµ¬ì„±ì˜ ë³€ê²½ì„ ìœ„í•´ ë‹¤ì‹œ ìƒì„±í•˜ë©´ ìƒˆ activityëŠ” ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ê°€ì ¸ì™€ì•¼ í•œë‹¤. ê°„ë‹¨í•œ ê²½ìš°ì—ëŠ” <code class="language-plaintext highlighter-rouge">onSaveInstanceState()</code>ë©”ì†Œë“œë¥¼ í†µí•´ ë³µì›í•  ìˆ˜ ìˆìœ¼ë‚˜ ì´ ê²½ìš°ëŠ” ì†ŒëŸ‰ì˜ ë°ì´í„°ì—ë§Œ ì í•©í•˜ë‹¤.</li>
      <li>UI ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë¹„ë™ê¸° í˜¸ì¶œì„ ìì£¼ í•´ì•¼í•œë‹¤.
        <ul>
          <li>ì´ëŠ” ë¹„ë™ê¸° í˜¸ì¶œê´€ë¦¬, ë©”ëª¨ë¦¬ëˆ„ì¶œ ë°©ì§€, ì‹œìŠ¤í…œì—ì„œ í˜¸ì¶œ íê¸° í›„ í˜¸ì¶œì„ í•˜ëŠ”ì§€ í™•ì¸í•´ì•¼í•œë‹¤.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p>uiì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ì£¼ë¡œ ui ë°ì´í„°ë¥¼ í‘œì‹œí•˜ê±°ë‚˜, ì‚¬ìš©ì ì‘ì—…ì— ë°˜ì‘í•˜ê±°ë‚˜, ê¶Œí•œìš”ì²­ê³¼ ê°™ì€ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ê²ƒì´ë‹¤. ì—¬ê¸°ì— ë°ì´í„°ë² ì´ìŠ¤ë‚˜ ë„¤íŠ¸ì›Œí¬ ë°ì´í„° ë¡œë“œë¥¼ ë‹´ë‹¹í•˜ë„ë¡ ìš”êµ¬í•˜ë©´ í´ë˜ìŠ¤ê°€ íŒ½ì°½í•œë‹¤. ì´ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ì–´ë µê²Œ ë§Œë“ ë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">ViewModel</code>ì€ UI ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë·° ë°ì´í„° ì†Œìœ ê¶Œì„ ë¶„ë¦¬í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•œë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// WordViewModel.kt

class WordViewModel(application: Application) : AndroidViewModel(application) {

    private val repository: WordRepository

    val allWords: LiveData&lt;List&lt;Word&gt;&gt;

    init {
        val wordsDao = WordRoomDatabase.getDatabase(application, viewModelScope).wordDao()
        repository = WordRepository(wordsDao)
        allWords = repository.allWords
    }

    fun insert(word: Word) = viewModelScope.launch(Dispatchers.IO) {
        repository.insert(word)
    }
}
</code></pre></div></div>
<ul>
  <li><code class="language-plaintext highlighter-rouge">Application</code>ì„ íŒŒë¼ë¯¸í„°ë¡œ ë°›ê³  <code class="language-plaintext highlighter-rouge">AndroidViewModel</code>ì„ ìƒì†ë°›ëŠ”ë‹¤.</li>
  <li>init blockì„ ì‚¬ìš©í•˜ì—¬ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì‹œ í•´ì•¼í•  ë¡œì§ì„ êµ¬í˜„í•œë‹¤.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">WordRoomDatabase</code>ë¥¼ ìƒì„±í•˜ê³  Dao ê°ì²´ë¥¼ ê°€ì ¸ì˜¨ë‹¤.</li>
      <li><code class="language-plaintext highlighter-rouge">WordRepository</code>ì— ê°€ì ¸ì˜¨ dao ë¥¼ ì…ë ¥í•˜ì—¬ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•œë‹¤.</li>
      <li><code class="language-plaintext highlighter-rouge">allWords</code>ì— repository ë‚´ë¶€ì—ì„œ ë³€í™”ë¥¼ ê´€ì°°í•˜ê³  ìˆëŠ” allWordsë¥¼ ì…ë ¥í•œë‹¤.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">insert(word: Word)</code>
    <ul>
      <li>ui ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ í˜¸ì¶œí•˜ì—¬ ì‚¬ìš©í•œë‹¤.</li>
      <li>ë°ì´í„°ì— ê´€ë ¨ëœ ë¡œì§ì€ viewModelì´ ë‹´ë‹¹í•˜ê³  ui ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ë‹¨ì§€ ë°ì´í„° ì…ë ¥ í›„ ì „ë‹¬ë§Œì„ ë‹´ë‹¹í•˜ê²Œ ëœë‹¤.</li>
      <li><code class="language-plaintext highlighter-rouge">viewModelScope</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ ì½”ë£¨í‹´ì„ êµ¬í˜„í•œë‹¤.
        <ul>
          <li>ìœ„ì—ì„œ ìƒì„±ëœ repositoryë‚´ë¶€ì˜ insert() ë©”ì†Œë“œë¥¼ í†µí•´ Word ë°ì´í„°ë¥¼ ì¶”ê°€í•œë‹¤.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h5 id="ui-controllerì˜-viewmodel"><code class="language-plaintext highlighter-rouge">UI Controller</code>ì˜ <code class="language-plaintext highlighter-rouge">ViewModel</code></h5>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// ArchiTecturecomponentActivity.kt 

...
private lateinit var wordViewModel: WordViewModel

override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.activity_architecture_component)
		
		...

    wordViewModel = ViewModelProvider(this).get(WordViewModel::class.java)
    wordViewModel.allWords.observe(this, Observer { words -&gt;
        // Update the cached copy of the words in the adapter.
        words?.let { adapter.setWords(it) }
    })

		...
}
...
</code></pre></div></div>
<ul>
  <li><code class="language-plaintext highlighter-rouge">ViewModelProvider(this).get(WordViewModel::class.java)</code>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">ViewModel</code>ì¸ìŠ¤í„´ìŠ¤ ìƒì„±</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">wordViewModel.allWords.observe{}</code>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">ViewModel</code> ë‚´ë¶€ì˜ <code class="language-plaintext highlighter-rouge">allWords</code> ê°ì²´ë¥¼  <code class="language-plaintext highlighter-rouge">observe{}</code> í†µí•´ ê´€ì°°í•œë‹¤.
        <ul>
          <li>ê´€ì°°í•˜ê³  ìˆë‹¤ê°€ ë³€ë™ì´ ë°œìƒí•œ ê²½ìš° <code class="language-plaintext highlighter-rouge">apdater.setWords(it)</code>ë¡œ ê°ì²´ë¥¼ ì „ë‹¬í•œë‹¤.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// WordListAdapter.kt
...

    override fun onBindViewHolder(holder: WordViewHolder, position: Int) {
        val current = words[position]
        holder.wordItemView.text = current.word
    }

    internal fun setWords(words: List&lt;Word&gt;) {
        this.words = words
        notifyDataSetChanged()
    }
...
</code></pre></div></div>
<ul>
  <li><code class="language-plaintext highlighter-rouge">Activity</code>ì—ì„œ <code class="language-plaintext highlighter-rouge">viewModel</code>ì„ í†µí•´ ê´€ì°°í•˜ê³ ìˆë˜ <code class="language-plaintext highlighter-rouge">allWords</code>ê°€ ì´ê³³ì— ì „ë‹¬ëœë‹¤.
    <ul>
      <li>ì „ë‹¬ë˜ì—ˆë‹¤ëŠ” ëœ»ì€ ë³€ê²½ë˜ì—ˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.</li>
      <li><code class="language-plaintext highlighter-rouge">notifiDataSetChanged()</code>ë©”ì†Œë“œë¡œ ë³€ê²½ë˜ì—ˆìŒì„ ì•Œë¦°ë‹¤.
        <ul>
          <li>ê·¸ë ‡ê²Œ ë˜ë©´ adpater ë‚´ë¶€ì—ì„œ ìë™ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">onBindViewHolder</code> ë¥¼ í˜¸ì¶œí•œë‹¤.
            <ul>
              <li>ì¬ì •ë¹„ ëœ words ì—ì„œ ë³€ê²½ëœ ë‚´ìš©ì´ ì—…ë°ì´íŠ¸ ëœë‹¤.</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p>ë‹¤ì‹œí•œë²ˆ ì•„ë˜ ì´ë¯¸ì§€ë¥¼ ë³´ë©°ì„œ ì •ë¦¬í•´ë³´ì.</p>

<p float="center">
<img src="/assets/images/png/architectureComponent.png" width="100%" />
</p>

<p>ë‹¤ì‹œë³´ë‹ˆ ViewModelì—ì„œ UI ì»¨íŠ¸ë¡¤ëŸ¬ì— ë³€ë™ì‚¬í•­ì„ ì•Œë¦¬ëŠ”ê²ƒì„ ì œì™¸í•˜ê³¤  í™”ì‚´í‘œì˜ ë°©í–¥ì´ ì•„ë˜ë¡œë§Œ ë˜ì–´ìˆëŠ”ê²ƒì´ ëˆˆì— ë“¤ì–´ì˜¨ë‹¤.</p>
:ET