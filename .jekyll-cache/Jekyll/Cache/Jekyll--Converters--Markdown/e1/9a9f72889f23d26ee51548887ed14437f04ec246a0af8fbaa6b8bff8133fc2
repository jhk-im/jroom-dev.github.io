I"Ú<p>ì°¸ê³ ìë£Œ <br />
<a href="https://github.com/ll0301/architecture-samples/tree/todo-mvvm-live-kotlin">https://github.com/ll0301/architecture-samples/tree/todo-mvvm-live-kotlin</a> <br />
<a href="https://medium.com/androiddevelopers/room-time-2b4cf9672b98">https://medium.com/androiddevelopers/room-time-2b4cf9672b98</a> <br />
<a href="https://developer.android.com/training/data-storage/room/referencing-data?hl=ko">https://developer.android.com/training/data-storage/room/referencing-data?hl=ko</a></p>

<hr />
<hr />
<h2 id="homehomefiltertypekt">home/HomeFilterType.kt</h2>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>enum class HomeFilterType {

    RECENT_BOOKMARKS,

    CATEGORY_BOOKMARKS,
}
</code></pre></div></div>
<ul>
  <li>ìœ„ì²˜ëŸ¼ Bookmarkë¥¼ ë³´ì—¬ì¤„ home activityì— Recentì™€ Categoryë¡œ ë‚˜ëˆ„ì–´ ë°ì´í„°ë¥¼ ë¿Œë ¤ì¤„ ê³„íšì„
    <ul>
      <li>Recentì˜ ê²½ìš° ìµœê·¼ì— ë¶ë§ˆí¬ë¥¼ ìƒì„± or í´ë¦­ í•œ ìˆœì„œëŒ€ë¡œ ë¿Œë ¤ì¤„ ê³„íšì´ë¼ Date Typeì˜ ì»¬ëŸ¼ì´ í•„ìš”í•¨</li>
    </ul>
  </li>
</ul>

<h2 id="datasourcebookmarkkt">data/source/Bookmark.kt</h2>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Entity(tableName = "bookmarks")
data class Bookmark @JvmOverloads constructor(
    @NonNull @ColumnInfo(name = "title") var title: String = "",
    @NonNull @ColumnInfo(name = "url") var url: String = "",
    @NonNull @ColumnInfo(name = "category") var category: String = "",
    @ColumnInfo(name = "selectedAt") var selectedAt: Date?,
    @PrimaryKey @ColumnInfo(name = "id") var id: String = UUID.randomUUID().toString()
) {
	. . .
}
</code></pre></div></div>
<ul>
  <li>@ColumnInfo(name = â€œselectedAtâ€) var selectedAt: Date?,
    <ul>
      <li>ìœ„ì²˜ëŸ¼ ë“±ë¡í•˜ì—¬ ì‚¬ìš©í•˜ë©´ ë ê²ƒì´ë¼ ìƒê°í–ˆì§€ë§Œ ë™ì‘í•˜ì§€ ì•Šì•˜ìŒ</li>
    </ul>
  </li>
  <li><a href="https://developer.android.com/training/data-storage/room/referencing-data?hl=ko">https://developer.android.com/training/data-storage/room/referencing-data?hl=ko</a>
    <ul>
      <li>ê³µì‹ í™ˆí˜ì´ì§€ì— Date to Long and Long to Date ë¡œ convertí•˜ëŠ” ë°©ë²•ì´ ë‚˜ì™€ìˆìŒ</li>
    </ul>
  </li>
</ul>

<h2 id="datasourcelocalconvertskt">data/source/local/Converts.kt</h2>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Converters {
    @TypeConverter
    fun fromTimestamp(value: Long?): Date? {
        return value?.let { Date(it) }
    }

    @TypeConverter
    fun dateToTimestamp(date: Date?): Long? {
        return date?.time
    }
}
</code></pre></div></div>
<ul>
  <li>Long to Date / Date to Long ê°ê°ì˜ ë©”ì†Œë“œë¥¼ ì‘ì„±
    <ul>
      <li>ë©”ì†Œë“œ ìœ„ì— @TypeConvert annotaionì„ ê¸°ì…í•˜ë©´ Roomì— convert ë©”ì†Œë“œê°€ ë“±ë¡ ë¨</li>
    </ul>
  </li>
</ul>

<h2 id="datasourcelocalbookmarkdatabasekt">data/source/local/BookmarkDatabase.kt</h2>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Database(entities = [Bookmark::class], version = 1)
@TypeConverters(Converters::class)
abstract class BookmarkDatabase : RoomDatabase() {
	
	abstract fun bookmarkDao(): BookmarkDao
	. . .
}
</code></pre></div></div>
<ul>
  <li>ë¡œì»¬ ë°ì´í„°ë² ì´ìŠ¤ íŒŒì¼ì„ ë§Œë“œëŠ” BookmarkDatabase ì¶”ìƒ í´ë˜ìŠ¤ ìœ„ì— ìœ„ì—ì„œ ìƒì„±í•œ Convertë¥¼ ì…ë ¥ (@TypeConverters)
    <ul>
      <li>ì´ì œ Data Model (Bookmark.kt) ê³¼ Query (BookmarkDao) ì—ì„œ Date íƒ€ì…ì„ ê¸°ì…í•  ìˆ˜ ìˆìŒ</li>
    </ul>
  </li>
</ul>

<h2 id="homehomeactivitykt">home/HomeActivity.kt</h2>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>private fun testLocalDatabase() {
    bookmarkRepository = Injection.provideBookmarksRepository(this)

    val localDate = Date()
    val newBookmark = Bookmark("Google", "https://www.google.com", "Portal", localDate)
    bookmarkRepository.saveBookmark(newBookmark)

    val localDate2 = Date()
    val newBookmark2 = Bookmark("Naver", "https://www.naver.com", "Portal", localDate2)
    bookmarkRepository.saveBookmark(newBookmark2)

    val localDate3 = Date()
    val newBookmark3 = Bookmark("Daum", "https://www.daum.com", "Portal", localDate3)
    bookmarkRepository.saveBookmark(newBookmark3)

    val sd = SimpleDateFormat("HH:mm:ss.SSS")

    bookmarkRepository.getBookmarks(object : BookmarkDataSource.LoadBookmarksCallback {
        override fun onBookmarksLoaded(bookmarks: List&lt;Bookmark&gt;) {
            for (bookmark in bookmarks) {
                Log.e(
                    "bookmark",
                    bookmark.id + "\n" +
                            bookmark.title + "\n" +
                            bookmark.url + "\n" +
                            sd.format(bookmark.selectedAt)
                )
            }
        }

        override fun onDataNotAvailable() {
            //
        }
    })

    bookmarkRepository.deleteAllBookmarks()
}
</code></pre></div></div>
<ul>
  <li>bookmark ê°ì²´ë¥¼ ì„ì˜ë¡œ 3ê°œì”© ìƒì„±í•˜ê³  Date() ë©”ì†Œë“œë¥¼ í†µí•´ Dateë¥¼ ì…ë ¥
    <ul>
      <li>bookmarkRepository ì˜ saveBookmark() ë©”ì†Œë“œë¡œ ë¡œì»¬ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥</li>
    </ul>
  </li>
  <li>bookmarkRepository ì˜ getBookmarks() ë©”ì†Œë“œë¡œ ì €ì¥ëœ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜´
    <ul>
      <li>SimpleDataFormat ì„ í™œìš©í•˜ì—¬ ì¶œë ¥ë˜ëŠ” ì •ë³´ë¥¼ ì»¤ìŠ¤í…€</li>
    </ul>
  </li>
</ul>

<h2 id="ê²°ê³¼">ê²°ê³¼</h2>

<p><img src="/assets/images/screenshot/2020-10-1520-48-37.png" width="500" /></p>
:ET